// BP3 Grammar: 12345678.bp
// Generated by bp2sc from: 12345678.bp
// Bol Processor BP3 â†’ SuperCollider Pattern transpiler
//
// Usage:
//   1. Boot the server: s.boot;
//   2. Execute this file: Ctrl+Enter (select all)
//   3. To stop: Cmd+. or Ctrl+.
//   4. Morph live: re-evaluate individual Pdef blocks

(

// Default SynthDef for testing (replace with your own)
SynthDef(\bp2sc_default, {
    |out=0, freq=440, amp=0.1, gate=1, pan=0|
    var sig, env;
    env = EnvGen.kr(Env.adsr(0.01, 0.1, 0.6, 0.3), gate, doneAction: 2);
    sig = SinOsc.ar(freq) + Pulse.ar(freq * 1.001, 0.3, 0.3);
    sig = LPF.ar(sig, freq * 4);
    Out.ar(out, Pan2.ar(sig * env * amp, pan));
}).add;


TempoClock.default.tempo = 88.0 / 60;


// Bol Processor BP3
// Grammar saved as "-gr.12345678". Date: 2025-03-15 09:42:42
// BP3 reference: -se.EkDoTin
// BP3 reference: -al.EkDoTin
// This project demonstrates performance controls on sound-objects. The structure is a well-known Kathak tihai.
// BP3 INIT: MIDI program 110

// --- Terminal sound-objects (customize to change sounds) ---
Pdef(\ek, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([60], 1), \dur, 0.25));
Pdef(\do, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([61], 1), \dur, 0.25));
Pdef(\tin, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([62], 1), \dur, 0.25));
Pdef(\char, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([63], 1), \dur, 0.25));
Pdef(\panch, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([64], 1), \dur, 0.25));
Pdef(\che, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([65], 1), \dur, 0.25));
Pdef(\sat, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([66], 1), \dur, 0.25));
Pdef(\at, Pbind(\instrument, \bp2sc_default, \midinote, Pseq([67], 1), \dur, 0.25));

// --- Subgrammar 1 (ORD) ---

Pdef(\S,
	Pseq([Pdef(\Tihai), Pbindf(Pdef(\Tihai), \ctranspose, -2), Pbindf(Pdef(\Tihai), \ctranspose, -2, \detune, -200)], 1)
);


Pdef(\Tihai,
	Pseq([
		Pbindf(Pseq([Pdef(\Huit)], 1), \stretch, 2/1),
		Pbindf(Pseq([Pdef(\Six)], 1), \stretch, 2/1),
		Pbindf(Pseq([Pdef(\Cinq)], 1), \stretch, 2/1),
		Pbindf(Pseq([Pdef(\Quatre)], 1), \stretch, 2/1),
		Event.silent(0.25),
		Pbindf(Pseq([
			Event.silent(0.25),
			Event.silent(0.25),
			Pdef(\ek),
			Event.silent(0.25),
			Event.silent(0.25),
			Pdef(\do),
			Event.silent(0.25),
			Event.silent(0.25),
			Pdef(\tin),
			Event.silent(0.25),
			Event.silent(0.25),
			Event.silent(0.25)
		], 1), \stretch, 3/12)
	], 1)
);


Pdef(\Huit,
	Pseq([
		Pdef(\ek),
		Pdef(\do),
		Pdef(\tin),
		Pdef(\char),
		Pdef(\panch),
		Pdef(\che),
		Pdef(\sat),
		Pdef(\at)
	], 1)
);


Pdef(\Six,
	Pseq([
		Pdef(\ek),
		Pdef(\do),
		Pdef(\tin),
		Pdef(\char),
		Pdef(\panch),
		Pdef(\che)
	], 1)
);


Pdef(\Cinq,
	Pseq([
		Pdef(\ek),
		Pdef(\do),
		Pdef(\tin),
		Pdef(\char),
		Pdef(\panch)
	], 1)
);


Pdef(\Quatre,
	Pseq([Pdef(\ek), Pdef(\do), Pdef(\tin), Pdef(\char)], 1)
);



// --- Play ---
Pdef(\S).play;

)
